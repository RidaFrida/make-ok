<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Генерируем сценарий…</title>

<style>
  :root{
    --bg:#15141c;
    --card-bg:#1d1c25;
    --violet:#755dff;
    --text:#e6e8f2;
    --sub:#9ca1b5;
  }
  body{
    margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
    background:var(--bg);color:var(--text);
    font:16px/1.45 system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;
  }
  .card{
    width:340px;padding:32px 28px;
    background:var(--card-bg);border-radius:24px;
    box-shadow:0 14px 45px rgba(0,0,0,.45);
    text-align:center;animation:pop .5s cubic-bezier(.25,1.3,.5,1);
  }
  @keyframes pop{0%{transform:scale(.8);opacity:0}100%{transform:scale(1);opacity:1}}
  h1{margin:0 0 4px;font-size:26px;letter-spacing:.4px;color:var(--violet);font-weight:700}
  p{margin:0 0 26px;color:var(--sub)}
  .btn{
    display:inline-block;padding:13px 22px;font-size:15px;font-weight:600;
    color:#fff;background:var(--violet);border:none;border-radius:14px;
    cursor:pointer;text-decoration:none;transition:transform .15s;
  }
  .btn:hover{transform:translateY(-2px)}
</style>

<div class="card">
  <h1>⏳ Новый сценарий в пути</h1>
  <p>Перегенерируем ваш контент — это займёт пару секунд.</p>
  <a class="btn" href="tg://resolve?domain=YourBot">Вернуться в бот</a>
</div>
<script>
  /* читаем chat_id и tr из query-строки */
  const qs  = new URLSearchParams(location.search);
  const cid = qs.get('chat_id');
  const tr  = qs.get('tr');

  /* вызываем ваш Make-вебхук (CORS не нужен, поэтому mode:'no-cors') */
  if (cid && tr){
      fetch(`https://hook.eu2.make.com/1w8mrh1pydyarigwmo3eslmnmukcb947?chat_id=${cid}&tr=${tr}`,
            { mode:'no-cors' });
  }

  /* авто-возврат в бота */
  setTimeout(() => location.href='tg://resolve?domain=postgeneratoraiBot', 1200);
</script>

<script>
  /* автоматический возврат, если пользователь не нажмёт кнопку */
  setTimeout(()=>location.href='tg://resolve?domain=postgeneratoraiBot',1200);
</script>
